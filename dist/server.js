const fetch=require("node-fetch"),express=require("express"),path=require("path"),cors=require("cors"),helmet=require("helmet"),rateLimit=require("express-rate-limit");require("dotenv").config();const app=express();app.use(helmet()),app.use(cors());const limiter=rateLimit({windowMs:9e5,max:100});app.use(limiter),app.use(express.static(path.join(__dirname,"dist"))),app.get("/*",((e,t)=>{t.sendFile(path.join(__dirname,"dist","index.html"))}));const Antei_API_URL=process.env.Antei_API_URL;app.get("/config",(async(e,t)=>{try{const e=await fetch(`${Antei_API_URL}/config`);if(!e.ok)throw new Error("Failed to fetch configuration from Antei");const r=await e.json();t.json(r)}catch(e){console.error("Error fetching config:",e),t.status(500).json({error:"Internal Server Error"})}})),app.get("/create-payment-intent",(async(e,t)=>{try{const r=await fetch(`${Antei_API_URL}/create-payment-intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.body)});if(!r.ok)throw new Error("Failed to create payment intent");const n=await r.json();t.json(n)}catch(e){console.error("Error creating payment intent:",e),t.status(500).json({error:"Internal Server Error"})}}));const PORT=process.env.PORT||5252;app.listen(PORT,(()=>console.log(`Server running on http://localhost:${PORT}`)));